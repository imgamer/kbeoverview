## 4. 概念
  这一节将对一般的概念和设计相关的问题进行解释。引擎基于这些概念来进行设计。
### 4.1 对象的数据分布
  一个对象的活动数据(active data)分布于4个主要地方：  
  
  1. 和cell上的entity相关。  
  2. 和base相关。  
  3. 在持久化的数据库中。  
  4. 在客户端上。  

在cell中的entity相关数据可被分类为：  
  
  * **内部数据：** 仅在它所在的cell上使用和存储。
  * ~~**服务端数据，或称为镜像(ghosted)数据：** 会把数据"ghosted"到其它cell，对于服务端的其它entity可用。~~ kbengine还未实现。
  * **客户端数据：** 可用于客户端。如entity配置为ALL_CLIENTS等属性变化可自动更新给客户端。
  
### 4.2 操作
  从客户端的角度来看，有4种操作的类型。  
  
  1. 服务端操作  
    这是服务端主动通知的操作，并不是当前客户端产生的。  
    例如，另一个Avatar正在跳跃，服务端主动把这个消息通知到本客户端，可以控制本客户端上与其的对应Avatar跳跃。
  2. 本地操作  
    这是只发生在当前客户端上的操作，并不需要通知给服务端或其它客户端。  
    例如，一个燃烧的火焰特效之类的纯客户端行为。
  3. 可撤销操作  
    这是一个客户端立即产生的操作，先假定这个操作是正确的，然后发送给服务端验证，服务端能够决定是否允禁止这个操作并让客户端回滚。  
    例如，玩家在客户端上的移动，可以先移动改变坐标并发送给服务端，服务端根据速度验证后才能确定移动的距离是否合法，不合法则会撤销玩家的移动操作，让他回到原坐标。
  4. 需要服务端确认的操作  
    这个操作需要服务端确认后才能在客户端上表现出来。  
    例如，玩家想要和另一个玩家挥手。例如，攻击一个玩家（被攻击者死亡）并不会被客户端表现，必须要等服务端确认。除了操作是由当前客户端发起之外，这和服务端操作有点像。

